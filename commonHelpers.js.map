{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = hit => {\n  return `\n  <li class=\"gallery-card\">\n\n  <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n  </a>\n\n    <div class=\"gallery-card-info\">\n      <div class=\"image-info\">\n        <p class=\"image-info-label\">Likes:</p>\n        <p class=\"image-info-counter\">${hit.likes}</p>\n      </div>\n      <div class=\"image-info\">\n        <p class=\"image-info-label\">Comments:</p>\n        <p class=\"image-info-counter\">${hit.comments}</p>\n      </div>\n      <div class=\"image-info\">  \n        <p class=\"image-info-label\">Views:</p>\n        <p class=\"image-info-counter\">${hit.views}</p>\n      </div>\n      <div class=\"image-info\">\n        <p class=\"image-info-label\">Dowloads:</p>\n        <p class=\"image-info-counter\">${hit.downloads}</p>\n      </div>\n    </div>\n  </li>\n  `;\n};\n\nexport const addProgressBar = (selector) => {\n  const loaderSpan = document.createElement('div');\n  loaderSpan.classList.add('loader');\n\n  const targetElement = document.querySelector(selector);\n  targetElement.insertAdjacentElement('afterend', loaderSpan);\n};\n\nexport const removeProgressBar = () => {\n  const elementToRemove = document.querySelector('.loader');\n  elementToRemove.remove();\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport const fetchPhotos = (query, page) => {\n  const axiosConfigs = {\n    params: {\n      key: '45247125-03c336e2130b29d2672f4e8a7',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  };\n  return axios.get(`/`, axiosConfigs);\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { addProgressBar } from './js/render-functions.js';\nimport { removeProgressBar } from './js/render-functions.js';\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nlet currentPage = 1;\nlet totalHits = 0;\nlet searchedValue = '';\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedValue = event.target.elements.user_query.value.trim();\n\n    currentPage = 1;\n\n    event.target.elements.user_query.value = '';\n\n    addProgressBar('.js-search-form');\n\n    if (searchedValue.length !== 0) {\n      const { data } = await fetchPhotos(searchedValue, currentPage);\n\n      if (data.hits.length === 0) {\n        galleryEl.innerHTML = '';\n\n        removeProgressBar();\n\n        iziToast.show({\n          title:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          color: 'red',\n        });\n\n        return;\n      }\n\n      totalHits = data.hits.length;\n\n      const galleryCardsTemplate = data.hits\n        .map(imgInfo => createGalleryCardTemplate(imgInfo))\n        .join('');\n\n      galleryEl.innerHTML = galleryCardsTemplate;\n\n      loadMoreBtnEl.classList.remove('is-hidden');\n\n      removeProgressBar();\n\n      const lightbox = new SimpleLightbox('.gallery-card a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n\n      lightbox.refresh();\n    } else {\n      removeProgressBar();\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    currentPage++;\n\n    addProgressBar('.js-gallery');\n\n    const { data } = await fetchPhotos(searchedValue, currentPage);\n\n    totalHits += data.hits.length;\n\n    const galleryCardsTemplate = data.hits\n      .map(imgInfo => createGalleryCardTemplate(imgInfo))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    let elem = document.querySelector('.gallery-card ');\n    let rect = elem.getBoundingClientRect();\n    console.log(rect.height);\n    window.scrollBy({\n      top: 2 * rect.height,\n      behavior: 'smooth',\n    });\n\n    const lightbox = new SimpleLightbox('.gallery-card a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\n    lightbox.refresh();\n\n    removeProgressBar();\n\n    if (totalHits >= data.totalHits) {\n      loadMoreBtnEl.classList.add('is-hidden');\n\n      iziToast.show({\n        title: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        color: 'grey',\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["createGalleryCardTemplate","hit","addProgressBar","selector","loaderSpan","removeProgressBar","axios","fetchPhotos","query","page","axiosConfigs","searchFormEl","galleryEl","loadMoreBtnEl","currentPage","totalHits","searchedValue","onSearchFormSubmit","event","data","iziToast","galleryCardsTemplate","imgInfo","SimpleLightbox","err","onLoadMoreBtnClick","rect"],"mappings":"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"}